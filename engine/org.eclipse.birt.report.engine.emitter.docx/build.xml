<?xml version="1.0" encoding="UTF-8"?>
<!-- 
	Build script for plugin org.eclipse.birt.report.engine.emitter.docx
 -->
<project basedir="." default="build" name="org.eclipse.birt.report.engine.emitter.docx">
	<property environment="env"/>
	<property file="META-INF/MANIFEST.MF" />
	<property name="plugin.version" value="4.3.0" /> 
	<property name="export.dir" location="export" /> 
	<property name="dir.src" value="src" /> 
	<property name="dir.bin" value="bin" /> 
	<property name="module.name" value="org.eclipse.birt.report.engine.emitter.docx" /> 
	<property name="jar.name" value="${module.name}_${Bundle-Version}.jar" /> 
  <property name="debuglevel" value="source,lines,vars"/>
  <property name="javac.target" value="1.5"/>
  <property name="javac.source" value="1.5"/>
  <property name="javac.debug.flag" value="true"/>
	<property name="optimize.flag" value="on"/>
	<property name="classes.dir" value="${dir.bin}"/>   
	
	<path id="class.path">
        <pathelement path="${classes.dir}" />
		
		<fileset dir="${eclipse.home}/plugins">
		   	<include name="org.eclipse.core.runtime*.jar" />
		   	<include name="org.eclipse.osgi*.jar" />
			
		</fileset>
		
		<fileset dir="${birt.home}/plugins">
		   	<include name="org.eclipse.birt.core*.jar" />
		   	<include name="org.eclipse.birt.report.engine*.jar" />
			<include name="org.eclipse.birt.report.engine.emitter.wpml*.jar" />
			<include name="org.eclipse.birt.report.model*.jar" />
			<include name="org.apache.commons.codec*.jar" />
		</fileset>
		
		<fileset dir="../">
            <include name="org.eclipse.birt.report.engine.ooxml/org.eclipse.birt.report.engine.ooxml*.jar" />
		   	<include name="org.eclipse.birt.report.engine/org.eclipse.birt.report.engine*.jar" />
        </fileset>
	</path>
	
	<!--  Compile source code and generate jar for this project. 
			 Input parameters:
			 	eclipse.home
		
	  --> 
 <target name="Jar" depends="NativeToAscii,compileSource" description="create project jar">
	
	 <!--  Create the project jar 
	  --> 
	<jar destfile="${jar.name}" manifest="./META-INF/MANIFEST.MF">
	 <fileset dir="${classes.dir}">
	  <include name="**/*.class" /> 
	  <include name="**/*.txt" /> 
	  <include name="**/*.xml" /> 
	  <include name="**/*.def" /> 
	  <include name="**/*.properties" /> 
	  </fileset>
	  <fileset dir="." includes="about.html,plugin.xml,fragment.xml,plugin.properties,plugin_??_??.properties,icons/**/**" /> 
	  </jar>
	  </target>
	 <!--  Export the project, for instance, jar files are copied to a designated folder
					 the dependency on Jar should implement in top level script by call sequence	
					 Parameters:
					 		- ${export.dir} target directory to put the plugin binaries
					 		- ${plugin.version} the version of plugin exported
		
	  --> 
	
 <target name="Export">
 	<copy todir="${export.dir}" preservelastmodified="true">
	   <fileset dir="." includes="${jar.name}" /> 
	 </copy>
 </target>

	
	 <!--  Clean all objects created by this script 
	  --> 
 <target name="Clean" description="clean up">
	 <!--  Delete the binary directory trees 
	  --> 
	  <delete dir="${classes.dir}" /> 
	  <delete file="${jar.name}" /> 
 </target>
	 <!--  Compile Source Files 
	  --> 
 <target name="compileSource">
	  <mkdir dir="${classes.dir}" /> 
	 <!--  copy any resource file we needed into the dir.bin directory
	  --> 
	 <copy todir="${classes.dir}">
	 <fileset dir="src">
	  <include name="**/*.txt" /> 
	  <include name="**/*.xml" /> 
	  <include name="**/*.properties" /> 
	  </fileset>
	  </copy>
	 <!--  Compile the java code from ${dir.src} into ${dir.bin} 
	  --> 
		<javac srcdir="${dir.src}"
		   debug="${javac.debug.flag}"
		   optimize="${optimize.flag}"
		   destdir="${classes.dir}"
		   includeJavaRuntime="yes"
		   compiler="javac1.5"
		   source="${javac.source}"
		   target="${javac.target}"
		   encoding="utf-8"
		   deprecation="off">
		  	  <classpath refid="class.path" /> 
	  </javac>
 </target>
	
 <target name="NativeToAscii" description="Execute native2ascii for *.msg files">
	  <native2ascii encoding="Cp1252" src="." dest="." ext=".properties" includes="**/*_de_DE.msg, **/*_fr_FR.msg, **/*_es_ES.msg" /> 
	  <native2ascii encoding="GBK" src="." dest="." ext=".properties" includes="**/*_zh_CN.msg" /> 
	  <native2ascii encoding="SJIS" src="." dest="." ext=".properties" includes="**/*_ja_JP.msg" /> 
	  <native2ascii encoding="MS949" src="." dest="." ext=".properties" includes="**/*_ko_KR.msg" /> 
	  </target>
 <target name="build" depends="Jar" description="" /> 
</project>
